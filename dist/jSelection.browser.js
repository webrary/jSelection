(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jSelection = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
module.exports=function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=n(1),r=function(){function t(t,e){this.xRange=t,this.xWindow=e}return t.prototype.getTextNodes=function(){if(this.xNodes)return this.xNodes;function t(t,e){var n=t.splitText(e);return n.startPosition=t.startPosition+f.XString.from(t.data).compact().length,n.endPosition=t.endPosition,t.endPosition=n.startPosition-1,n}var e=this.xRange.startContainer,n=this.xRange.endContainer,r=this.xRange.startOffset,o=this.xRange.endOffset,i=this.xWindow.getNodes(),a=i.indexOf(e),u=t(e,r);0<u.length&&i.splice(a+1,0,u),n===e&&(n=u,o-=r);var c=i.indexOf(n),s=t(n,o);return 0<s.length&&i.splice(c+1,0,s),this.xNodes=i.slice(a+1,c+1),this.xNodes},t.prototype.getOccurrence=function(){var t=this.xRange.endContainer;if(3!==t.nodeType||3!==this.xRange.startContainer.nodeType)throw new Error("illegal selection");var e=this.xRange.endOffset,n=f.XString.from(t.substringData(0,e)).compact(),r=n?n.length:0;if(r<1)throw new Error("illegal selection");var o=f.XString.from(this.xRange.toString()).compact(),i=this.xWindow.getText().substr(0,t.startPosition+r),a=f.XString.from(i).find(o);if(a&&0<a.length)return a[a.length-1];throw new Error("illegal selection")},t.prototype.getContent=function(){return this.xRange.toString()},t.prototype.getSelection=function(){var t=this.xWindow.getWindow().getSelection();return t.rangeCount<1&&t.addRange(this.xRange),t},t.prototype.empty=function(){this.getSelection().empty&&this.getSelection().empty(),this.getSelection().removeAllRanges&&this.getSelection().removeAllRanges()},t.prototype.cancel=function(){var t=this.getTextNodes(),e=t[0],n=t[t.length-1];e&&e.parentNode&&e.parentNode.normalize(),n&&n.parentNode&&n.parentNode.normalize();var r=this.xWindow.getNodes(),o=r.indexOf(e),i=r.indexOf(n);i<r.length-1&&n.nextSibling===r[i+1]&&(n.endPosition=r[i+1].endPosition,r.splice(i+1,1)),0<o&&e.previousSibling===r[o-1]&&(r[o-1].endPosition=e.endPosition,r.splice(o,1))},t}();e.XSelection=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(t){this.valStr=t}return e.from=function(t){return new e(t)},e.prototype.indexOf=function(t,e){void 0===e&&(e=1);for(var n=0,r=-2;n<e&&-1!==r;)r=this.valStr.indexOf(t,r+1),n++;return r},e.prototype.find=function(t){var e=0,n=-2,r=[];if(t.length<1)return r;for(;-1!==n&&!((n=this.valStr.indexOf(t,n+1))<0);)r.push({nth:++e,position:n});return r},e.prototype.compact=function(){return this.valStr.replace(/\s+/gm,"")},e.prototype.trim=function(){return this.valStr.replace(/(^\s*)|(\s*$)/g,"")},e}();e.XString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.XSelection=r.XSelection;var o=n(3);e.XWindow=o.XWindow},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),a=n(0),g=n(1),o=function(){function e(t){var e=t.ownerDocument;if(e)this.doc=e;else{if(!(t instanceof Document))throw new r.Error("the owner document is not found");this.doc=t}this.selection=null;var n=this.init(t);this.text=n.text,this.nodes=n.nodes,this.root=t}return e.from=function(t){return void 0===t&&(t=document.body),new e(t)},e.prototype.getNodes=function(){return this.nodes},e.prototype.getText=function(){return this.text},e.prototype.getWindow=function(){var t=this.doc.defaultView;if(!t)throw new r.Error("the owner window is not found");return t},e.prototype.select=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1),this.selection&&t&&(this.selection.cancel(),this.selection.getSelection().empty(),this.selection=null);var r=this.getWindow(),o=r.getSelection();if(!t)return 0<o.rangeCount?this.selection=new a.XSelection(r.getSelection().getRangeAt(0),this):null;var i=this.rangeFrom_(t,e);return i.startContainer===this.getWindow().document||i.endContainer===this.getWindow().document?null:(n&&(o.removeAllRanges(),o.addRange(i)),this.selection=new a.XSelection(i,this))},e.prototype.normalize=function(){var n=this;this.root.normalize();var r=0;this.nodes.reverse().forEach(function(t,e){t.parentNode?0<r&&(t.endPosition=r):(r=t.endPosition,n.nodes.splice(n.nodes.length-e,1))})},e.prototype.init=function(t){var o,e=(o=[],function t(e){if(3===e.nodeType&&/\S/.test(e.data))o.push(e);else if(1===e.nodeType&&!i.test(e,null))for(var n=0,r=e.childNodes.length;n<r;++n)t(e.childNodes[n])}(t),o),n=0,r="";return e.forEach(function(t){t.startPosition=n;var e=g.XString.from(t.data).compact();r+=e,n+=e.length,t.endPosition=n-1}),{text:r,nodes:e}},e.prototype.rangeFrom_=function(t,e){function n(t,e,n){for(var r=0,o=0;r<e+n;o++)/\s+/m.test(t[o])||r++;return o-n}if(void 0===e&&(e=1),t){var r=this.text,o=this.nodes,i=this.doc.createRange(),a=g.XString.from(t).compact(),u=g.XString.from(r).indexOf(a,e||1);if(-1<u){for(var c=u+o[0].startPosition,s=c+a.length,f=void 0,l=void 0,d=0;d<o.length;d++){var p=o[d];if(!f&&p.endPosition>=c&&(f=o[d]),p.startPosition>=s){l=o[d-1];break}}if(f){l=l||o[o.length-1];var h=n(f.data,c-f.startPosition,1),y=n(l.data,s-l.startPosition,0);i.setStart(f,h),i.setEnd(l,y)}}return i}return this.doc.createRange()},e}();e.XWindow=o;var i={elements:["applet","area","base","basefont","bdo","button","frame","frameset","iframe","head","hr","img","input","link","map","meta","noframes","noscript","optgroup","option","param","script","select","style","textarea","title"],test:function(t,e){return-1<(e||this.elements).indexOf(t.tagName.toLowerCase())}}},function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2016 Palantir Technologies, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),r=new Set,o=function(r){function o(t,e){var n=r.call(this,t)||this;return n.message=t,n.innerError=e,n.name=o.NAME,Object.setPrototypeOf(n,o.prototype),n}return i.__extends(o,r),o.NAME="FatalError",o}(Error);e.FatalError=o,e.isError=function(t){return null!=t&&void 0!==t.message},e.showWarningOnce=function(t){r.has(t)||(console.warn(t),r.add(t))},e.showRuleCrashWarning=function(t,e,n){console.warn("The '"+e+"' rule threw an error in '"+n+"':\n"+t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return o}),n.d(e,"__assign",function(){return i}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return u}),n.d(e,"__param",function(){return c}),n.d(e,"__metadata",function(){return s}),n.d(e,"__awaiter",function(){return f}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return h}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return v}),n.d(e,"__asyncDelegator",function(){return m}),n.d(e,"__asyncValues",function(){return w}),n.d(e,"__makeTemplateObject",function(){return b}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return x});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n}function u(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;0<=u;u--)(o=t[u])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}function c(n,r){return function(t,e){r(t,e,n)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(i,a,u,c){return new(u||(u=Promise))(function(t,e){function n(t){try{o(c.next(t))}catch(t){e(t)}}function r(t){try{o(c.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(n,r)}o((c=c.apply(i,a||[])).next())})}function l(n,r){var o,i,a,t,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){u.label=e[1];break}if(6===e[0]&&u.label<a[1]){u.label=a[1],a=e;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(e);break}a[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(t,e||[]),a=[];return o={},r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o;function r(r){i[r]&&(o[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||u(r,n)})})}function u(t,e){try{(n=i[t](e)).value instanceof g?Promise.resolve(n.value.v).then(c,s):f(a[0][2],n)}catch(t){f(a[0][3],t)}var n}function c(t){u("next",t)}function s(t){u("throw",t)}function f(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}}function m(r){var t,o;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(o=!o)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function w(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=c[Symbol.asyncIterator];return e?e.call(c):(c=p(c),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(u){t[u]=c[u]&&function(a){return new Promise(function(t,e){var n,r,o,i;a=c[u](a),n=t,r=e,o=a.done,i=a.value,Promise.resolve(i).then(function(t){n({value:t,done:o})},r)})}}}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}}]);
},{}]},{},[1])(1)
});
